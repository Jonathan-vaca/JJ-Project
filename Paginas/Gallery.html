<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Gallery | Jr Signs</title>

  <style>
    /* ---------------- HEADER ---------------- */
    header {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 90px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0 60px;
      background: transparent;
      z-index: 1000;
    }

    .logo-area {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .logo-area img {
      height: 50px;
      width: auto;
      object-fit: contain;
    }

    .logo-text {
      display: flex;
      flex-direction: column;
      line-height: 1;
    }

    .logo-text .name {
      font-weight: 700;
      font-size: 22px;
      color: #fff;
    }

    .logo-text .tagline {
      font-size: 14px;
      color: #ff0303;
      font-weight: 600;
      letter-spacing: 0.5px;
    }

    nav ul {
      list-style: none;
      display: flex;
      gap: 28px;
      margin: 0;
      padding: 0;
    }

    nav ul li a {
      color: #fff;
      text-decoration: none;
      font-weight: 600;
      text-transform: uppercase;
      font-size: 14px;
      transition: color 0.3s;
    }

    nav ul li a:hover,
    nav ul li a.active {
      color: #ff0303c4;
    }

    /* ---------------- HERO ---------------- */
    :root {
      --accent: #ff0303;
      --dark-overlay: rgba(0,0,0,0.35);
      --card-w: 150px;
      --card-h: 220px;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }
    html, body { height: 100%; background: #000; color: #fff; font-family: "Open Sans", sans-serif; }

    .hero {
      position: relative;
      width: 100%;
      height: 100vh;
      background-size: cover;
      background-position: center;
      transition: background-image 600ms ease;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
    }

    .hero::before {
      content: "";
      position: absolute;
      inset: 0;
      background: var(--dark-overlay);
      z-index: 2;
    }

.wrap {
  position: relative;
  z-index: 4;
  width: 92%;
  max-width: 1200px;
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  padding-top: 0; /* âœ… sin espacio extra */
  margin-top: 0;
}
    .left { flex: 1.2; padding-right: 3rem; }
    .region { font-size: 14px; opacity: 0.85; margin-bottom: 10px; letter-spacing: 1px; }
    .place { font-size: 4rem; line-height: 0.9; margin: 0 0 16px 0; font-weight: 800; text-transform: uppercase; }
    .desc { max-width: 420px; opacity: 0.9; margin-bottom: 18px; }

    .explore {
      background: var(--accent);
      color: #ffffff;
      border: none;
      padding: 10px 18px;
      border-radius: 24px;
      font-weight: 700;
      cursor: pointer;
      transition: background 0.3s ease, transform 0.2s ease;
    }

    .explore:hover {
      background: #ff4a4a;
      transform: scale(1.05);
    }

    .right {
      flex: 1;
      display: flex;
      align-items: flex-end;
      justify-content: center;
      padding-bottom: 40px;
    }

    .cards-row {
      display: flex;
      gap: 18px;
      transition: transform 600ms cubic-bezier(.22, .9, .3, 1);
      margin-top: 200px;
    }

    .card {
      width: var(--card-w);
      height: var(--card-h);
      border-radius: 16px;
      background-size: cover;
      background-position: center;
      box-shadow: 0 8px 30px rgba(0,0,0,0.5);
      cursor: pointer;
      transition: transform 300ms ease, opacity 300ms ease;
      position: relative;
    }

    .card .meta {
      position: absolute;
      left: 12px;
      bottom: 14px;
      z-index: 2;
      color: #fff;
      text-shadow: 0 3px 12px rgba(0,0,0,0.6);
      font-size: 13px;
    }

    .controls {
      position: absolute;
      left: 50%;
      transform: translateX(-50%);
      bottom: 5px;
      z-index: 6;
      display: flex;
      gap: 12px;
    }

    .btn {
      width: 44px;
      height: 44px;
      border-radius: 50%;
      border: none;
      background: rgba(255,255,255,0.18);
      color: #fff;
      font-size: 18px;
      cursor: pointer;
    }

    .counter {
      position: absolute;
      right: 56px;
      bottom: 36px;
      z-index: 6;
      font-weight: 700;
      font-size: 18px;
    }

    .anim-bg {
      position: absolute;
      border-radius: 16px;
      background-size: cover;
      background-position: center;
      z-index: 1;
      pointer-events: none;
      will-change: transform, width, height, left, top, opacity;
    }

    .cards-wrapper {
      position: relative;
      overflow: hidden;
      width: calc((var(--card-w) + 18px) * 4);
      margin-right: -80px;
      display: flex;
      justify-content: flex-start;
    }

    .progress-bar {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 5px;
      background: linear-gradient(to right, #00bcd4, #4caf50);
      animation: progress 6s linear infinite;
      z-index: 9999;
    }

    .progress {
      width: 0%;
      height: 100%;
      background: var(--accent);
      transition: width 6s linear;
    }
/* --- BOTONES DE CONTACTO (logos redondos) --- */
.contact-btn {
  background: #25d366; /* WhatsApp verde */
  border: none;
  border-radius: 50%;
  width: 58px;
  height: 58px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: transform 0.25s ease, box-shadow 0.25s ease;
}

.contact-btn:hover {
  transform: scale(1.1);
  box-shadow: 0 0 15px rgba(255, 255, 255, 0.4);
}

.contact-btn img {
  width: 32px;
  height: 32px;
  filter: brightness(0) invert(1);
}

.contact-btn.gmail {
  background: #ffffff; /* rojo Gmail */
}

.contact-btn.gmail img {
  width: 34px;
  height: 34px;
  filter: none; /* mantiene los colores originales del logo */
}

  </style>
</head>

<body>
  <!-- HEADER -->
  <header>
    <div class="logo-area">
      <img src="../components/Logos/NELogo.png" alt="Logo">
      <div class="logo-text">
        <span class="name">J.Jr Signs</span>
        <span class="tagline">Custom Projects</span>
      </div>
    </div>

    <nav>
      <ul>
        <li><a href="../Paginas/Home.html">Home</a></li>
        <li><a href="../Paginas/Gallery.html" class="active">Gallery</a></li>
        <li><a href="../Paginas/Services.html">Services</a></li>
        <li><a id="login-link" href="../Paginas/Login.html">Login</a></li>
      </ul>
    </nav>
  </header>

  <!-- HERO -->
  <div id="hero" class="hero">
    <div class="wrap">
      <div class="left">
        <div class="region" id="regionTxt">Switzerland Alps</div>
        <h1 class="place" id="placeTxt">SAINT ANTÃ–NIEN</h1>
        <p class="desc">
          If you are interested in contacting us and requesting a personalized quote, please click one of the buttons below.
        </p>

<!-- BOTONES DE CONTACTO -->
<div style="display: flex; gap: 14px; flex-wrap: wrap;">
  <button class="contact-btn" id="btnWhatsapp" title="Contact via WhatsApp">
    <img src="https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/whatsapp.svg" alt="WhatsApp Logo">
  </button>

<button class="contact-btn gmail" id="btnEmail" title="Contact via Gmail">
  <img src="https://upload.wikimedia.org/wikipedia/commons/7/7e/Gmail_icon_%282020%29.svg" alt="Gmail Logo">
</button>
</div>

        <script>
          // === CONFIGURACIÃ“N ===
          const phoneNumber = "14702757046"; // ðŸ‘‰ Reemplaza con tu nÃºmero de WhatsApp (sin +)
          const emailAddress = "Jchaparrovaca@gmail.com"; // ðŸ‘‰ Reemplaza con tu correo

          const message = encodeURIComponent("Hello, I would like to quote a personalized service.");

          // === BOTONES ===
          document.getElementById("btnWhatsapp").addEventListener("click", () => {
            window.open(`https://wa.me/${phoneNumber}?text=${message}`, "_blank");
          });

          document.getElementById("btnEmail").addEventListener("click", () => {
            window.location.href = `mailto:${emailAddress}?subject=Service%20Quote%20Request&body=${message}`;
          });
        </script>
      </div>

      <div class="right">
        <div class="cards-wrapper">
          <div id="cardsRow" class="cards-row"></div>
        </div>
      </div>

      <div class="controls">
        <button id="prevBtn" class="btn">&#10094;</button>
        <button id="nextBtn" class="btn">&#10095;</button>
      </div>
      <div class="counter" id="counter">01</div>
      <div class="progress-bar">
        <div id="progress" class="progress"></div>
      </div>
    </div>
  </div>

  <!-- LOGIN LOGIC -->
  <script>
    (function () {
      const loginLink = document.getElementById("login-link");
      if (loginLink) {
        const token = localStorage.getItem("api_token");
        const usuario = JSON.parse(localStorage.getItem("usuario") || "null");

        if (token && usuario) {
          loginLink.textContent = `Logout (${usuario.nombre})`;
          loginLink.href = "#";
          loginLink.addEventListener("click", (e) => {
            e.preventDefault();
            localStorage.removeItem("api_token");
            localStorage.removeItem("userRole");
            localStorage.removeItem("usuario");
            window.location.href = "../Paginas/Login.html";
          });
        } else {
          loginLink.textContent = "Login";
          loginLink.href = "../Paginas/Login.html";
        }
      }
    })();
  </script>

  <!-- GALLERY LOGIC -->
  <script>
    (function(){
      async function fetchSlides() {
        try {
          const res = await fetch("/api/gallery");
          if (!res.ok) throw new Error("Error al cargar imÃ¡genes");
          const data = await res.json();
          if (!data.length) {
            return [
              { imageUrl: "https://images.unsplash.com/photo-1501785888041-af3ef285b470?auto=format&fit=crop&w=1400&q=80", title: "SAINT ANTÃ–NIEN" },
              { imageUrl: "https://images.unsplash.com/photo-1524492412937-b28074a5d7da?auto=format&fit=crop&w=1400&q=80", title: "NAGANO PREFECTURE" },
              { imageUrl: "https://images.unsplash.com/photo-1518684079-3c830dcef090?auto=format&fit=crop&w=1400&q=80", title: "MARRAKECH MERZOUGA" },
              { imageUrl: "https://images.unsplash.com/photo-1500048993953-d23a436266cf?auto=format&fit=crop&w=1400&q=80", title: "YOSEMITE NATIONAL PARK" },
              { imageUrl: "https://images.unsplash.com/photo-1507525428034-b723cf961d3e?auto=format&fit=crop&w=1400&q=80", title: "LOS LANCES BEACH" }
            ];
          }
          return data;
        } catch (e) {
          console.error(e);
          return [];
        }
      }

      const hero = document.getElementById('hero');
      const cardsRow = document.getElementById('cardsRow');
      const regionTxt = document.getElementById('regionTxt');
      const placeTxt = document.getElementById('placeTxt');
      const counter = document.getElementById('counter');
      const nextBtn = document.getElementById('nextBtn');
      const prevBtn = document.getElementById('prevBtn');

      let slides = [];
      let currentIndex = 0;
      let animating = false;
      const autoplayInterval = 6000;
      let autoplayTimer;

      async function initGallery() {
        slides = await fetchSlides();
        if (!slides.length) return;

        slides.forEach((s, i) => {
          const c = document.createElement('div');
          c.className = 'card';
          c.style.backgroundImage = `url('${s.imageUrl}')`;
          c.dataset.index = i;
          c.innerHTML = `<div class="meta"><div class="title">${s.title}</div></div>`;
          cardsRow.appendChild(c);
          c.addEventListener('click', () => { if(!animating) activateIndex(i); });
        });

        hero.style.backgroundImage = `url('${slides[0].imageUrl}')`;
        regionTxt.textContent = "GalerÃ­a JR Signs";
        placeTxt.textContent = slides[0].title;

        startAutoplay();
      }

      function cardToBackground(index) {
        animating = true;
        const card = cardsRow.querySelector(`.card[data-index="${index}"]`);
        const cards = [...cardsRow.querySelectorAll('.card')];
        const heroRect = hero.getBoundingClientRect();
        const rect = card.getBoundingClientRect();

        const clone = card.cloneNode(true);
        clone.classList.add('anim-bg');
        clone.style.left = (rect.left - heroRect.left) + 'px';
        clone.style.top = (rect.top - heroRect.top) + 'px';
        clone.style.width = rect.width + 'px';
        clone.style.height = rect.height + 'px';
        clone.style.borderRadius = '16px';
        clone.style.transition = 'all 1.1s cubic-bezier(.25,1.2,.25,1)';
        hero.appendChild(clone);

        card.style.transition = 'opacity 0.5s ease, transform 0.5s ease';
        card.style.opacity = '0';
        card.style.transform = 'scale(0.9)';

        requestAnimationFrame(() => {
          clone.style.left = '0';
          clone.style.top = '0';
          clone.style.width = '100%';
          clone.style.height = '100%';
          clone.style.borderRadius = '0';
        });

        setTimeout(() => {
          hero.style.backgroundImage = `url('${slides[index].imageUrl}')`;
          regionTxt.textContent = "GalerÃ­a JR Signs";
          placeTxt.textContent = slides[index].title;
        }, 400);

        setTimeout(() => {
          clone.remove();
          cardsRow.appendChild(card);

          cards.forEach((c) => {
            c.style.transition = 'transform 0.6s cubic-bezier(.25,.8,.25,1)';
            c.style.transform = 'translateX(0)';
            c.style.opacity = '1';
          });

          card.style.opacity = '1';
          card.style.transform = 'scale(1)';
          card.style.transition = 'none';
          animating = false;
        }, 1100);
      }

      function activateIndex(newIndex) {
        if (animating) return;
        newIndex = (newIndex + slides.length) % slides.length;
        currentIndex = newIndex;
        counter.textContent = String(currentIndex + 1).padStart(2, '0');
        cardToBackground(newIndex);
        resetAutoplay();
      }

      nextBtn.onclick = () => activateIndex(currentIndex + 1);
      prevBtn.onclick = () => activateIndex(currentIndex - 1);

      function startAutoplay() {
        stopAutoplay();
        fillProgressBar();
        autoplayTimer = setInterval(() => {
          activateIndex(currentIndex + 1);
          fillProgressBar();
        }, autoplayInterval);
      }

      function fillProgressBar() {
        const bar = document.getElementById('progress');
        if (!bar) return;
        bar.style.transition = 'none';
        bar.style.width = '0%';
        void bar.offsetWidth;
        bar.style.transition = 'width 6s linear';
        bar.style.width = '100%';
      }

      function stopAutoplay() { if (autoplayTimer) clearInterval(autoplayTimer); }
      function resetAutoplay() { stopAutoplay(); startAutoplay(); }

      hero.addEventListener('mouseenter', stopAutoplay);
      hero.addEventListener('mouseleave', startAutoplay);

      initGallery();
    })();
  </script>
</body>
</html>
